{% extends "base.j2" %}

{% block title %}
Sections
{% endblock %}

{% block content %}
<h1>Sections</h1>

{% for section in sections if not session.termid or section.term.id == session.termid %}
    <h3><a href="{{ url_for('section_page', section_id=section.id) }}">{{ section.period_abbreviation }}-{{ section.course_name}}({{section.teacher}})</a></h3>
    <form method="post" action="{{ url_for('section_page', section_id=section.id) }}">
        <div class="form-group">
            <label for="courseSelect">Google Classroom</label>
            <select id="courseSelect" name="course">
                {% if not section.course %}
                <option value=""  disabled selected>Select Classroom</option>
                {% endif %}
                {% for course in courses %}
                    {% if course.id == section.course.id %}
                        <option value="{{ course.id }}" selected>{{ course.get_title() }}</option>
                    {% else %}
                        <option value="{{ course.id }}">{{ course.get_title() }}</option>
                    {% endif %}
                {% endfor %}
        <input type="submit" class="btn btn-sm btn-success" value="{{ 'Update' }}">
    </form>
    <ul>
        <li>school: {{ section.school.abbreviation }}</li>
        <li>term: {{section.term.abbreviation}}</li>
        <li>period number: {{ section.period_number }}</li>
        <li>no of students: {{ section.no_of_students }}</li>
        <li>room: {{ section.room }}</li>
        <li>teacher email: {{ section.teacher_email }}</li>
        <li>ps dcid: {{ section.ps_dcid }}</li>
        <li>period abbreviation: {{ section.period_abbreviation }}</li>
        
            <li>roster <a class="btn btn-sm btn-primary" href="{{ url_for('update_section_roster', section_id=section.id)}}">update</a> </li>
        {% if section.students %}
            <ul>
                {% for student in section.students %}
                <li>{{ student.name }} ({{student.email }})</li>
            
                {% endfor %}
            </ul>
        {% endif %}

    </ul>
{% endfor %}
{% endblock %}
